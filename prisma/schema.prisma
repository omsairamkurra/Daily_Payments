generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  id          String          @id @default(cuid())
  email       String          @unique
  password    String
  name        String?
  payments    Payment[]
  notes       Note[]
  budgets     MonthlyBudget[]
  investments Investment[]
  createdAt   DateTime        @default(now())
}

model Payment {
  id          String   @id @default(cuid())
  date        DateTime
  description String
  amount      Float
  location    String?
  userId      String
  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Note {
  id        String   @id @default(cuid())
  title     String
  content   String
  userId    String
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model MonthlyBudget {
  id        String   @id @default(cuid())
  month     Int      // 1-12
  year      Int      // e.g., 2024
  salary    Float    // Monthly income/budget
  userId    String
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([userId, month, year])
}

model Investment {
  id             String   @id @default(cuid())
  name           String   // "HDFC Midcap Fund", "Reliance Stock"
  type           String   // "mutual_fund", "stock", "sip", "fd", "ppf", "other"
  investedAmount Float    // Total amount put in
  currentValue   Float?   // Current market value (update manually)
  units          Float?   // Number of units/shares (optional)
  purchaseDate   DateTime
  notes          String?
  userId         String
  user           User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
}
